# Server Config (Gateway runs on 8080)
server.port=8080

# Application Name (This is how it appears in Eureka)
spring.application.name=api-gateway

# --- THE FIX STARTS HERE ---
# 1. Force the name to be localhost
eureka.instance.hostname=localhost

# 2. Tell Eureka: "Do NOT use the IP address, use the hostname I just set"
eureka.instance.prefer-ip-address=false

# 3. Manually set the ID shown on the dashboard so it looks clean
eureka.instance.instance-id=${spring.application.name}:${eureka.instance.hostname}:${server.port}
# --- THE FIX ENDS HERE ---

# Gateway Configuration
# Enable automatic routing based on service names
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# Eureka Client Config (Tell it where the Registry is)
eureka.client.service-url.defaultZone=http://localhost:8079/eureka/

# Route 1: Portfolio Service
# Predicate: The URL pattern to watch for
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/portfolio/**
# ID: Just a name for logs
spring.cloud.gateway.routes[0].id=portfolio-service
# URI: "lb" means Load Balance. It matches spring.application.name from Part 1
spring.cloud.gateway.routes[0].uri=lb://portfolio-service
